var app=angular.module("peopleApp",["ngResource","ngRoute"]);app.controller("peopleController",function(n,t,i){n.people=[];n.people=t.getPeople().then(function(t){console.log("Refreshing List of people.");n.people=t.data;console.log(n.people.length)});n.editRow=function(n){i.location.href("#/edit/"+n)};n.filterPeople=function(){t.getPeopleByName(n.searchKeyword).then(function(t){n.searchKeyword.length==0&&i.location.href("/");n.people=t.data})}});app.controller("peopleEditController",function(n,t,i,r){i.getPerson(t.id).then(function(t){n.person=t.data});n.updatePerson=function(){i.updatePerson(n.person);n=n.$new(!0);r.location.href("/")}});app.controller("peopleCreateController",function(n,t,i){n.person={};n.updatePerson=function(){t.insertPerson(n.person);n=n.$new(!0);i.location.href("/")}});angular.module("peopleApp").factory("peopleFactory",["$http","$resource",function(n){var i="/api/people",t={};return t.getPeople=function(){return n.get(i+"?_="+(new Date).getTime())},t.getPerson=function(t){return n.get(i+"/"+t)},t.getPeopleByName=function(t){return n.get(i+"/GetByName/"+t)},t.insertPerson=function(t){return n.post(i,t)},t.updatePerson=function(t){return n.put(i+"/"+t.id,t)},t.deletePerson=function(t){return n.delete(i+"/"+t)},t}]);app=angular.module("peopleApp");app.config(function(n){n.when("/",{templateUrl:"js/templates/list.html",controller:"peopleController"}).when("/new",{templateUrl:"js/templates/new.html",controller:"peopleCreateController"}).when("/edit/:id",{templateUrl:"js/templates/new.html",controller:"peopleEditController"}).otherwise({redirectTo:"/"})});app.config(["$httpProvider",function(n){n.defaults.headers.get||(n.defaults.headers.get={});n.defaults.headers.get["If-Modified-Since"]="Mon, 26 Jul 1997 05:00:00 GMT";n.defaults.headers.get["Cache-Control"]="no-cache";n.defaults.headers.get.Pragma="no-cache"}]);